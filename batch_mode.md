Теперь скрипт поддерживает асинхронную работу с Batch API и может запускаться в разных режимах.

## Режимы работы скрипта

1. **Создание batch-заданий**:
   ```bash
   python get_embeddings_batch_mode.py --mode create
   ```
   Этот режим только создает batch-задания и сразу завершается. Информация о созданных заданиях сохраняется в файл `batch_jobs.json`.

2. **Проверка и обработка результатов**:
   ```bash
   python get_embeddings_batch_mode.py --mode check
   ```
   Проверяет статус ранее созданных заданий и обрабатывает завершенные, сохраняя эмбеддинги в БД.

3. **Вывод статуса заданий**:
   ```bash
   python get_embeddings_batch_mode.py --mode status
   ```
   Показывает текущий статус всех заданий без выполнения каких-либо операций.

4. **Полный цикл**:
   ```bash
   python get_embeddings_batch_mode.py
   # или
   python get_embeddings_batch_mode.py --mode full
   ```
   Создает новые задания и проверяет статус существующих.

## Как организовать рабочий процесс

1. **День 1**:
   - Запустите `python get_embeddings_batch_mode.py --mode create` для создания batch-заданий
   - Скрипт отправит задания в API OpenAI и завершится

2. **День 2 (через 24 часа)**:
   - Запустите `python get_embeddings_batch_mode.py --mode check` для проверки статуса заданий
   - Завершенные задания будут обработаны и эмбеддинги сохранены в БД

3. **В любой момент**:
   - Запустите `python get_embeddings_batch_mode.py --mode status` для просмотра текущего состояния

## Преимущества этого подхода:

1. Не нужно держать скрипт запущенным 24 часа
2. Информация о заданиях сохраняется между запусками
3. Можно запускать скрипт по расписанию (например, через cron)
4. Вы сразу видите статистику по заданиям без необходимости ждать окончания всех процессов

## Практический пример использования:

Настройте запуск через cron:
```bash
# Создание заданий каждый день в 9 утра
0 9 * * * cd /path/to/project && python get_embeddings_batch_mode.py --mode create

# Проверка результатов каждый день в 10 утра (через 25 часов после создания)
0 10 * * * cd /path/to/project && python get_embeddings_batch_mode.py --mode check
```

